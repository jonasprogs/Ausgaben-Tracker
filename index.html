<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Meine App</title>

  <!-- Deine bestehende Haupt-CSS -->
  <link rel="stylesheet" href="styles.css"/>

  <!-- NEU: Sidebar-Styles -->
  <link rel="stylesheet" href="sidebar.css"/>

  <!-- NEU: Chart.js fÃ¼r das Kuchendiagramm auf der VermÃ¶gensseite -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
</head>
<body>

  <!-- Deine bestehende App-OberflÃ¤che:
       Lass alles darunter unverÃ¤ndert, wenn du bereits HTML-Inhalt hast.
       Falls deine App nur per JS rendert, reicht dieser Container. -->
  <div id="app"></div>

  <!-- ===== Sidebar / Drawer (NEU) ===== -->
  <!-- kleiner Toggle-Button (Position kannst du spÃ¤ter anpassen) -->
  <button id="openSidebar" title="MenÃ¼"
          style="position:fixed;left:14px;bottom:14px;z-index:5000;border-radius:999px;padding:10px 12px;border:1px solid #162046;background:#0e1630;color:#eef2ff;cursor:pointer">
    â‰¡
  </button>

  <!-- halbtransparenter Hintergrund -->
  <div class="drawer-backdrop" id="drawerBackdrop" hidden></div>

  <!-- das eigentliche Sidebar-Panel -->
  <aside class="drawer" id="drawer" hidden>
    <div class="drawer-header">
      <div class="brand-dot"></div>
      <div class="brand-name">MenÃ¼</div>
      <button id="closeDrawer" class="icon-btn" title="SchlieÃŸen">âœ•</button>
    </div>

    <nav class="drawer-nav">
      <!-- Link 1: zurÃ¼ck zur bestehenden Ansicht -->
      <button class="nav-btn" data-route="expenses">ğŸ“’ Ausgaben</button>

      <!-- Link 2: NEUE VermÃ¶gens-Seite -->
      <button class="nav-btn" data-route="wealth">ğŸ’° VermÃ¶gen (monatlich)</button>
    </nav>

    <!-- Bereich fÃ¼r Seiten-Inhalte der Sidebar -->
    <div class="drawer-content">
      <div id="drawerPage"></div>
    </div>
  </aside>

  <!-- ===== JS ===== -->

  <!-- Deine bestehende Hauptlogik -->
  <script src="app.js"></script>

  <!-- NEU: VermÃ¶gensmodul -->
  <script src="wealth.js"></script>

  <!-- NEU: kleines Init fÃ¼r Sidebar -->
  <script>
    (function(){
      const $ = s => document.querySelector(s);
      const drawer = $('#drawer');
      const backdrop = $('#drawerBackdrop');
      const openBtn = $('#openSidebar');
      const closeBtn = $('#closeDrawer');
      const page = $('#drawerPage');

      function open(){ drawer.hidden=false; backdrop.hidden=false; requestAnimationFrame(()=>drawer.classList.add('open')); }
      function close(){ drawer.classList.remove('open'); backdrop.hidden=true; setTimeout(()=>{ drawer.hidden=true; page.innerHTML=''; }, 180); }

      openBtn?.addEventListener('click', open);
      closeBtn?.addEventListener('click', close);
      backdrop?.addEventListener('click', close);

      // Routen-Handling innerhalb der Sidebar
      document.addEventListener('click', (e)=>{
        const btn = e.target.closest('.nav-btn');
        if (!btn) return;
        const route = btn.dataset.route;
        if (route === 'wealth') {
          page.innerHTML = '';
          if (window.WealthModule) {
            window.WealthModule.render(page); // zeichnet UI + Pie-Chart
          } else {
            page.innerHTML = '<div style="padding:12px;color:#cbd5e1">Lade VermÃ¶gensmodulâ€¦</div>';
          }
        } else if (route === 'expenses') {
          // Einfach schlieÃŸen â€“ deine bestehende Ansicht bleibt unverÃ¤ndert sichtbar
          close();
        }
      });
    })();
  </script>
</body>
</html>