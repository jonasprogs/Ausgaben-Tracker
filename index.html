<!DOCTYPE html>
<html lang="de" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Ausgaben-Tracker</title>

  <!-- Deine bestehende Haupt-CSS -->
  <link rel="stylesheet" href="styles.css"/>

  <!-- Sidebar / Wealth / Trades Styles -->
  <link rel="stylesheet" href="sidebar.css"/>

  <meta name="theme-color" content="#0f172a"/>
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <button class="close-btn" id="closeSidebarBtn">Ã—</button>
    <button class="nav-link" data-page="ausgaben">ğŸ“„ Ausgaben-Tracker</button>
    <button class="nav-link" data-page="vermoegen">ğŸ’° VermÃ¶gen</button>
    <button class="nav-link" data-page="trades">ğŸ“ˆ Trades</button>
  </div>

  <div class="container" id="main-content">
    <header class="header">
      <div class="title" id="page-title">
        <button class="menu-btn" id="openSidebarBtn">â˜°</button>
        <span>ğŸ§¾ Ausgaben-Tracker</span>
      </div>
      <!-- Theme Toggle -->
      <button id="themeToggle" class="menu-btn" title="Theme umschalten">ğŸŒ“</button>
    </header>

    <!-- Seite 1: Ausgaben -->
    <section id="page-ausgaben" style="display:block">
      <div id="app"></div>
    </section>

    <!-- Seite 2: VermÃ¶gen -->
    <section id="page-vermoegen" style="display:none">
      <div id="wealth-app" style="padding:16px;"></div>
    </section>

    <!-- Seite 3: Trades -->
    <section id="page-trades" style="display:none">
      <div id="trades-app" style="padding:16px;"></div>
    </section>
  </div>

  <!-- React 18 -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <!-- Day.js -->
  <script src="https://unpkg.com/dayjs@1/dayjs.min.js"></script>
  <!-- ğŸ”§ WICHTIG: Plugins wieder dazu, sonst crasht app.js -->
  <script src="https://unpkg.com/dayjs@1/plugin/utc.js"></script>
  <script src="https://unpkg.com/dayjs@1/plugin/timezone.js"></script>

  <!-- Tesseract (OCR) â€“ gehÃ¶rt zu deinem Ausgabentracker -->
  <script src="https://unpkg.com/tesseract.js@4/dist/tesseract.min.js"></script>

  <!-- Chart.js fÃ¼r den Trades-Chart -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>

  <!-- Deine bestehende App (nutzt dayjs + plugins) -->
  <script src="app.js"></script>

  <!-- Wealth & Trades Module -->
  <script src="wealth.js"></script>
  <script src="trades.js"></script>

  <!-- Router + Theme -->
  <script>
    (function(){
      const pages = ["ausgaben","vermoegen","trades"];
      const $ = (s)=>document.querySelector(s);

      function navigate(page){
        pages.forEach(p=>{
          const el = $("#page-"+p);
          if (el) el.style.display = (p===page) ? "block" : "none";
        });
        $("#page-title").querySelector("span").textContent =
          page==="ausgaben" ? "ğŸ§¾ Ausgaben-Tracker" : (page==="vermoegen" ? "ğŸ’° VermÃ¶gen" : "ğŸ“ˆ Trades");
        closeSidebar();
        if (page!=="ausgaben") window.scrollTo({top:0,behavior:"smooth"});
      }

      function openSidebar(){ $("#sidebar").classList.add("open"); }
      function closeSidebar(){ $("#sidebar").classList.remove("open"); }

      // Sidebar Buttons
      document.addEventListener("click",(e)=>{
        const btn = e.target.closest(".nav-link");
        if (!btn) return;
        const page = btn.dataset.page;
        if (page) navigate(page);
      });
      $("#openSidebarBtn")?.addEventListener("click", openSidebar);
      $("#closeSidebarBtn")?.addEventListener("click", closeSidebar);

      // Theme
      const THEME_KEY = "app-theme";
      const root = document.documentElement;
      const stored = localStorage.getItem(THEME_KEY);
      if (stored) root.setAttribute("data-theme", stored);
      $("#themeToggle")?.addEventListener("click", ()=>{
        const cur = root.getAttribute("data-theme") || "dark";
        const next = cur==="dark" ? "light" : "dark";
        root.setAttribute("data-theme", next);
        localStorage.setItem(THEME_KEY, next);
      });

      // Start: Ausgaben anzeigen
      navigate("ausgaben");
      window.navigate = navigate;
    })();
  </script>
</body>
</html>